{% extends "base.html" %}
{% block content %}
<section class="space-y-6">
  <div class="bg-slate-900/50 border border-slate-800 rounded-2xl p-6">
    <h2 class="text-lg font-semibold mb-2">Your query</h2>
    <p class="text-slate-300">{{ query }}</p>
    {% if parsed %}
    <details class="mt-3 text-sm text-slate-400">
      <summary class="cursor-pointer">Parsed filters</summary>
      <pre class="mt-2 bg-slate-950/80 p-3 rounded-xl overflow-x-auto">{{ parsed | tojson(indent=2) }}</pre>
    </details>
    {% endif %}
  </div>

  {% if explanation %}
  <div class="bg-slate-900/50 border border-slate-800 rounded-2xl p-6">
    <h3 class="text-lg font-semibold mb-2">Why these?</h3>
    <p class="text-slate-300">{{ explanation }}</p>
  </div>
  {% endif %}

  <div class="bg-slate-900/50 border border-slate-800 rounded-2xl p-0 overflow-hidden">
    <table class="w-full text-sm">
      <thead class="bg-slate-900/70">
        <tr>
          <th class="text-left px-4 py-3">Title</th>
          <th class="text-left px-4 py-3">Year</th>
          <th class="text-left px-4 py-3">Genres</th>
          <th class="text-left px-4 py-3">Avg ★</th>
          <th class="text-left px-4 py-3">Reason</th>
        </tr>
      </thead>
      <tbody>
        {% for r in rows %}
        <tr class="border-t border-slate-800 hover:bg-slate-900/40">
          <td class="px-4 py-3">{{ r.title }}</td>
          <td class="px-4 py-3">{{ r.year or '—' }}</td>
          <td class="px-4 py-3">{{ r.genres }}</td>
          <td class="px-4 py-3">{{ r.rating_mean }}</td>
          <td class="px-4 py-3 text-slate-300">{{ r.reason }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <a href="/" class="inline-flex items-center gap-2 rounded-xl px-4 py-2 bg-slate-800 hover:bg-slate-700">← New search</a>
</section>
{% endblock %}
